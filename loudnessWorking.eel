desc: Loudness Working

gain:0<-30,30,1>Gain (dB)
level:60<40,90,1>Listening Level
comp:100<0,100,1>Compensation (%)

@init
DB_2_LOG = 0.11512925464970228420089957273422;
gain = 0;
level = 60;
comp = 100;

@slider
gainLin = exp(gain * DB_2_LOG);
levelDiff = 83 - level;
compDB = levelDiff * 0.15 * (comp / 100);
compDB > 12 ? compDB = 12;
compDB < -12 ? compDB = -12;
compGain = exp(compDB * DB_2_LOG);
totalGain = gainLin * compGain;

@sample
spl0 = spl0 * totalGain;
spl1 = spl1 * totalGain;